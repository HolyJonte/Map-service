{# admin_dashboard.html #}
{% extends "base.html" %}

{% block title %}Adminpanel{% endblock %}

{% block content %}

<div class="container dashboard">
  <h2 class="mb-4">Tillagda dagstidningar</h2>

  {% if newspapers %}
    <div class="newspaper-list">
      {% for paper in newspapers %}
        <div class="newspaper-card">
          <div>
            <h5>{{ paper.name }}</h5>
            {% if paper.contact_email %}
              <p><strong>E-post:</strong> {{ paper.contact_email }}</p>
            {% endif %}
            {% if paper.sms_quota is not none %}
              <p><strong>SMS-kvot:</strong> {{ paper.sms_quota }}</p>
            {% endif %}
          </div>
          <form method="POST" class="delete-form">
            <input type="hidden" name="id" value="{{ paper.id }}">
            <button type="submit" name="action" value="delete" class="btn btn-danger btn-sm">Ta bort</button>
          </form>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>Inga dagstidningar registrerade än.</p>
  {% endif %}
</div>


  <div class="auth-card mt-4">
    <h2>Lägg till ny dagstidning</h2>
  
    {% if error %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
  
    <form method="POST" class="mt-4">
      <input type="hidden" name="action" value="add">
      <input type="text" name="name" placeholder="Tidningens namn" required>
      <input type="email" name="contact_email" placeholder="Kontaktmail (valfritt)">
      <input type="number" name="sms_quota" placeholder="SMS-kvot (valfritt)">
      <button type="submit">Lägg till</button>
    </form>
  </div>
  
  
{% endblock %}