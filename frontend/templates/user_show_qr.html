{# user_show_qr.html #}
{% extends "base.html" %}

{% block title %}QR-kod för 2FA{% endblock %}

{% block content %}
<div class="card text-center">
  <h2 class="mt-4">Skanna QR-koden med din Authenticator-app</h2>
  <p class="text-muted">Använd Google Authenticator eller liknande för att generera en engångskod.</p>
  <p class="text-muted">Du kan också öppna din kamera-app i din mobiltelefon och rikta den mot QR-koden.</p>
  <p class="text-muted">Du kommer då att få val om vilken app du vill öppna, om du redan har en sådan installerad.</p>

  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endif %}

  {% if success %}
    <div class="alert alert-success">{{ success }}</div>
  {% endif %}

  {% if qr_data is none %}
    <div class="alert alert-warning">QR-koden är inte tillgänglig just nu.</div>
  {% endif %}
  {% if qr_data %}
    <img src="data:image/png;base64,{{ qr_data }}" alt="QR-kod" class="img-fluid mt-4" style="max-width: 300px;">
  {% else %}
    <div class="alert alert-danger">Kunde inte generera QR-kod</div>
  {% endif %}

  <div class="mt-4 d-flex justify-content-center gap-3">
    <a href="/users/2fa" class="btn btn-primary">Till kodverifiering</a>
    <a href="/users/login" class="btn btn-secondary">Tillbaka</a>
  </div>
</div>
{% endblock %}
